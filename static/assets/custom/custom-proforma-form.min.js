$(".date-picker").datepicker({autoclose:!0,orientation:"bottom",format:"dd/mm/yyyy"}),$(document).ready(function(){$(".currencypicker ").select2({placeholder:"Select a client",minimumResultsForSearch:1/0});for(var e=0;e<currentFormCount;e++)$(`#id_proforma_goods-${e}-unit`).select2({minimumResultsForSearch:1/0})});for(var deleteButtons=document.querySelectorAll(".form-check-label"),i=0;i<deleteButtons.length;i++){const e=deleteButtons[i].getAttribute("for");"id_proforma_goods-__prefix__-DELETE"!=e&&deleteButtons[i].setAttribute("class","btn btn-danger form-check-label")}const addMoreBtn=document.getElementById("add-goods"),totalNewForms=document.getElementById("id_proforma_goods-TOTAL_FORMS"),element=document.getElementById("instruction"),currentGoodsForms=document.getElementsByClassName("goods-list"),currentFormCount=currentGoodsForms.length;deleteButtons.forEach(function(e){e.addEventListener("click",function(){var e=this.closest(".goods-list");e.style.display="none"})}),currentFormCount>0&&(element.style.display="none"),addMoreBtn.addEventListener("click",e=>{e&&e.preventDefault(),element&&(element.style.display="none");const t=document.getElementById("goods-form"),r=document.getElementById("empty-form").cloneNode(!0),o=currentGoodsForms.length;r.setAttribute("class","row goods-list dynamic-proforma_goods"),r.setAttribute("id",`form-${o}`);const d=new RegExp("__prefix__","g");r.innerHTML=r.innerHTML.replace(d,o),totalNewForms.setAttribute("value",o+1),t.append(r);const n=document.getElementById(`div_id_proforma_goods-${o}-product`),l=document.getElementById(`div_id_proforma_goods-${o}-quantity`),i=document.getElementById(`div_id_proforma_goods-${o}-unit`),s=document.getElementById(`div_id_proforma_goods-${o}-unit_price`),c=document.getElementById(`div_id_proforma_goods-${o}-DELETE`);n.setAttribute("class","col-sm-12 col-md-6 col-lg-3 mb-3"),l.setAttribute("class","col-sm-12 col-md-6 col-lg-3 mb-3"),i.setAttribute("class","col-sm-12 col-md-6 col-lg-3 mb-3"),s.setAttribute("class","col-sm-12 col-md-6 col-lg-3 mb-3"),c.setAttribute("class","col-sm-12 col-md-6 col-lg-3");var m=`id_proforma_goods-${o}-DELETE`,a=document.querySelector('label[for="'+m+'"]');a.style.display="none",$(`#id_proforma_goods-${o}-unit`).select2({minimumResultsForSearch:1/0});const u=document.createElement("button");u.innerHTML="Delete",u.classList.add("btn","btn-danger"),u.addEventListener("click",()=>{const e=document.getElementsByClassName("goods-list"),t=document.getElementById("id_proforma_goods-TOTAL_FORMS");t.value=e.length-1,e.length-1==0?element.style.display="block":element.style.display="none";var o=r,d=Array.from(e),n=d.indexOf(o);if(r.remove(),-1!==n){d.splice(n,1);for(var l=n;l<d.length;l++){var i=d[l].id.replace(/\d+/,l);d[l].id=i;var s=d[l].children,c=Array.from(s),m=Array.from(document.getElementsByClassName("select2-selection__rendered")),a=m[2].id.replace(/-\d+-/,`-${l}-`);m[2].id=a;for(var u=0;u<c.length;u++){var g=c[u].getAttribute("id"),f=c[u].getAttribute("name");if(null!==g){var y=c[u].getAttribute("id").replace(/\d+/,l);c[u].setAttribute("id",y);var p=Array.from(document.getElementById(c[u].getAttribute("id")).children);p.forEach(function(e){if(null!==e.getAttribute("id")){var t=e.getAttribute("id").replace(/\d+/,l);e.setAttribute("id",t),e.getAttribute("id")===`id_proforma_goods-${l}-unit`&&$(`#id_proforma_goods-${l}-unit`).select2({minimumResultsForSearch:1/0})}if(null!==e.getAttribute("name")){var r=e.getAttribute("name").replace(/\d+/,l);e.setAttribute("name",r)}if(null!==e.getAttribute("for")){var o=e.getAttribute("for").replace(/\d+/,l);e.setAttribute("for",o)}})}if(null!==f){var A=c[u].getAttribute("name").replace(/\d+/,l);c[u].setAttribute("name",A)}}var b=Array.from(Array.from(Array.from(document.querySelectorAll(`#${d[l].id}`))[0].children)[6].children)[0],_=Array.from(Array.from(Array.from(document.querySelectorAll(`#${d[l].id}`))[0].children)[6].children)[0].children,E=b.id.replace(/\d+/,l),v=_[0].getAttribute("id").replace(/\d+/,l),h=_[0].getAttribute("name").replace(/\d+/,l),B=_[1].getAttribute("for").replace(/\d+/,l);b.id=E,_[0].setAttribute("id",v),_[0].setAttribute("name",h),_[1].setAttribute("for",B)}}}),c.appendChild(u)});