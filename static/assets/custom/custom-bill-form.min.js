$(".date-picker").datepicker({autoclose:!0,orientation:"bottom",format:"dd/mm/yyyy"}),$(document).ready(function(){$(".currencypicker ").select2({placeholder:"Select a client",minimumResultsForSearch:1/0});for(var e=0;e<currentFormCount;e++)$(`#id_bill_goods-${e}-unit`).select2({minimumResultsForSearch:1/0})});for(var deleteButtons=document.querySelectorAll(".form-check-label"),i=0;i<deleteButtons.length;i++){const e=deleteButtons[i].getAttribute("for");"id_bill_goods-__prefix__-DELETE"!=e&&deleteButtons[i].setAttribute("class","btn btn-danger form-check-label")}const addMoreBtn=document.getElementById("add-goods"),totalNewForms=document.getElementById("id_bill_goods-TOTAL_FORMS"),element=document.getElementById("instruction"),currentGoodsForms=document.getElementsByClassName("goods-list"),currentFormCount=currentGoodsForms.length;deleteButtons.forEach(function(e){e.addEventListener("click",function(){var e=this.closest(".goods-list");e.style.display="none"})}),currentFormCount>0&&(element.style.display="none"),addMoreBtn.addEventListener("click",e=>{e&&e.preventDefault(),element&&(element.style.display="none");const t=document.getElementById("goods-form"),l=document.getElementById("empty-form").cloneNode(!0),r=currentGoodsForms.length;l.setAttribute("class","row goods-list dynamic-bill_goods"),l.setAttribute("id",`form-${r}`);const o=new RegExp("__prefix__","g");l.innerHTML=l.innerHTML.replace(o,r),totalNewForms.setAttribute("value",r+1),t.append(l);const d=document.getElementById(`div_id_bill_goods-${r}-color`),i=document.getElementById(`div_id_bill_goods-${r}-count`),n=document.getElementById(`div_id_bill_goods-${r}-quantity`),s=document.getElementById(`div_id_bill_goods-${r}-unit`),c=document.getElementById(`div_id_bill_goods-${r}-unit_price`),m=document.getElementById(`div_id_bill_goods-${r}-DELETE`);d.setAttribute("class","col-sm-12 col-md-6 col-lg-3 mb-3"),i.setAttribute("class","col-sm-12 col-md-6 col-lg-3 mb-3"),n.setAttribute("class","col-sm-12 col-md-6 col-lg-3 mb-3"),s.setAttribute("class","col-sm-12 col-md-6 col-lg-3 mb-3"),c.setAttribute("class","col-sm-12 col-md-6 col-lg-3 mb-3"),m.setAttribute("class","col-sm-12 col-md-6 col-lg-3");var u=`id_bill_goods-${r}-DELETE`,a=document.querySelector('label[for="'+u+'"]');a.style.display="none",$(`#id_bill_goods-${r}-unit`).select2({minimumResultsForSearch:1/0});const g=document.createElement("button");g.innerHTML="Delete",g.classList.add("btn","btn-danger"),g.addEventListener("click",()=>{const e=document.getElementsByClassName("goods-list"),t=document.getElementById("id_bill_goods-TOTAL_FORMS");t.value=e.length-1,e.length-1==0?element.style.display="block":element.style.display="none";var r=l,o=Array.from(e),d=o.indexOf(r);if(l.remove(),-1!==d){o.splice(d,1);for(var i=d;i<o.length;i++){var n=o[i].id.replace(/\d+/,i);o[i].id=n;var s=o[i].children,c=Array.from(s),m=Array.from(document.getElementsByClassName("select2-selection__rendered")),u=m[2].id.replace(/-\d+-/,`-${i}-`);m[2].id=u;for(var a=0;a<c.length;a++){var g=c[a].getAttribute("id"),b=c[a].getAttribute("name");if(null!==g){var y=c[a].getAttribute("id").replace(/\d+/,i);c[a].setAttribute("id",y);var A=Array.from(document.getElementById(c[a].getAttribute("id")).children);A.forEach(function(e){if(null!==e.getAttribute("id")){var t=e.getAttribute("id").replace(/\d+/,i);e.setAttribute("id",t),e.getAttribute("id")===`id_bill_goods-${i}-unit`&&$(`#id_bill_goods-${i}-unit`).select2({minimumResultsForSearch:1/0})}if(null!==e.getAttribute("name")){var l=e.getAttribute("name").replace(/\d+/,i);e.setAttribute("name",l)}if(null!==e.getAttribute("for")){var r=e.getAttribute("for").replace(/\d+/,i);e.setAttribute("for",r)}})}if(null!==b){var _=c[a].getAttribute("name").replace(/\d+/,i);c[a].setAttribute("name",_)}}var f=Array.from(Array.from(Array.from(document.querySelectorAll(`#${o[i].id}`))[0].children)[7].children)[0],p=Array.from(Array.from(Array.from(document.querySelectorAll(`#${o[i].id}`))[0].children)[7].children)[0].children,E=f.id.replace(/\d+/,i),v=p[0].getAttribute("id").replace(/\d+/,i),h=p[0].getAttribute("name").replace(/\d+/,i),B=p[1].getAttribute("for").replace(/\d+/,i);f.id=E,p[0].setAttribute("id",v),p[0].setAttribute("name",h),p[1].setAttribute("for",B)}}}),m.appendChild(g)});